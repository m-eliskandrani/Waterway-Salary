VAT = window.VAT || {}, function (n) { function t() { VIS.CalloutEngine.call(this, "VAT.CalloutEmployeeSalary") } function i() { VIS.CalloutEngine.call(this, "VAT.CalloutDepartment") } VIS.Utility.inheritPrototype(t, VIS.CalloutEngine); t.prototype.netSalary = function (n, t, i, r, u, f) { if (this.isCalloutActive() || u == null || u.toString() == "") return ""; this.setCalloutActive(!0); try { var c, l, e, o, s, h; e = VIS.Utility.Util.getValueOfDecimal(i.getValue("VAT_BasicSalary")); o = VIS.Utility.Util.getValueOfDecimal(i.getValue("VAT_HRA")); h = VIS.Utility.Util.getValueOfDecimal(i.getValue("VAT_TDS")); s = VIS.Utility.Util.getValueOfDecimal(i.getValue("VAT_PF")); this.log.fine("BasicSalary=" + e + ", hra=" + o + ", pf=" + s); c = e + o - (s + h); l = e + o + s + h; i.setValue("VAT_NET", c); i.setValue("VAT_Gross", l) } catch (a) { return VIS.ADialog.info("error in NetSalary" + a, null, "", ""), this.setCalloutActive(!1), a } return this.setCalloutActive(!1), n = t = i = r = u = f = null, "" }; n.Model = n.Model || {}; n.Model.CalloutEmployeeSalary = t; VIS.Utility.inheritPrototype(i, VIS.CalloutEngine); i.prototype.showDepartmentCode = function (n, t, i, r, u, f) { if (this.isCalloutActive() || u == null || u.toString() == "") return ""; this.setCalloutActive(!0); try { var e = u, o = "SELECT VAT_DepartmentCode From VAT_Department Where VAT_Department_ID=" + e, s = VIS.DB.executeScalar(o); i.setValue("VAT_DepartmentCode", s) } catch (h) { this.setCalloutActive(!1); this.log.severe(h.toString()) } return this.setCalloutActive(!1), n = t = i = r = u = f = null, "" }; n.Model = n.Model || {}; n.Model.CalloutDepartment = i }(VAT, jQuery); VAT = window.VAT || {}, function (n, t) { function i() { function tt() { n.load(VIS.Application.contextUrl + "VAT/EmployeeByView/Index/?windowno=" + i, function () { p = n.find("#lblName_" + i); a = n.find("#txtName_" + i); w = n.find("#lblDepartment_" + i); e = n.find("#cmbDepartment_" + i); b = n.find("#lblEmployeeGrade_" + i); o = n.find("#cmbEmployeeGrade_" + i); k = n.find("#lblDateOfBirth_" + i); v = n.find("#vdate_" + i); u = n.find("#lblBottomMsg_" + i); g = n.find("#leftSideDiv_" + i); nt = n.find("#leftSideBottomDiv_" + i); y = n.find("#rightSideDiv_" + i); h = n.find("#btnOk_" + i); c = n.find("#btnCancel_" + i); p.text(VIS.Msg.translate(VIS.Env.getCtx(), "Name")); w.text(VIS.Msg.translate(VIS.Env.getCtx(), "Department")); b.text(VIS.Msg.translate(VIS.Env.getCtx(), "EmployeeGrade")); k.text(VIS.Msg.translate(VIS.Env.getCtx(), "DateOfBirth")); u.text(VIS.Msg.translate(VIS.Env.getCtx(), "Bottom Message")); h.on(VIS.Events.onTouchStartOrClick, function () { ft() }); c.on(VIS.Events.onTouchStartOrClick, function () { a.val(""); o.prop("selectedIndex", -1); e.prop("selectedIndex", -1); v.val(""); u.text("Please Fill value to insert record.") }); rt(); ut(); d() }) } function it(n) { if (confirm("Are You Sure,You want to delete this record?")) { var i = f.get(n).VAT_Employee_ID; t.ajax({ type: "POST", url: VIS.Application.contextUrl + "VAT/Common/Delete", dataType: "json", data: { employeeId: i }, success: function (n) { var t = n.result; if (t) { u.text("Record Deleted."); d(); return } u.text("Record not delete.") } }) } } function rt() { var f = e, i, n, r, u; for (t(f).html(""), i = "select vat_department_id,vat_departmentname from vat_department where isactive='Y'", n = VIS.DB.executeReader(i.toString(), null) ; n.read() ;) r = VIS.Utility.Util.getValueOfInt(n.getString(0)), u = n.getString(1), e.append(" <option value=" + r + ">" + u + "<\/option>"); n.close(); e.prop("selectedIndex", 0) } function ut() { var f = o, i, n, r, u; for (t(f).html(""), i = "select value,name from ad_ref_list where ad_reference_id=(select ad_reference_id from ad_reference where name='VAT_EmployeeGrade')", n = VIS.DB.executeReader(i.toString(), null) ; n.read() ;) r = n.getString(0), u = n.getString(1), o.append(" <option value=" + r + ">" + u + "<\/option>"); n.close(); o.prop("selectedIndex", 0) } function ft() { var r = e.find("option:selected").val(), f = o.find("option:selected").val(), i = a.val(), n = v.val(); i.length <= 0 && VIS.ADialog.info("FillMandatoryField!"); n != "" && (n = n.toString()); t.ajax({ type: "POST", url: VIS.Application.contextUrl + "VAT/Common/Save", dataType: "json", data: { employeeId: 0, name: i, departmentId: r, empGrade: f, date: n }, success: function (n) { var t = n.result; if (t) { u.text("Record saved."); d(); return } u.text("Record not saved.") } }) } function d() { var i = [], u = VIS.Env.getCtx().getAD_Client_ID(), f = "select e.VAT_Employee_ID,e.name,d.vat_departmentname,e.vat_employeegrade,e.v_date,e.vat_department_id  from vat_employee e left join vat_department d on d.vat_department_id=e.vat_department_id  where e.ad_client_id=" + u, t, r, n; try { for (t = VIS.DB.executeReader(f.toString(), null, null), r = 1; t.read() ;) n = {}, n.VAT_Employee_ID = t.getInt(0), n.Name = t.getString(1), n.vat_departmentname = t.getString(2), n.VAT_EmployeeGrade = t.getString(3), n.V_Date = t.getString(4), n.VAT_Department_ID = t.getInt(5), n.recid = r, r++, i.push(n) } catch (e) { } return et(i), i } function et(n) { f != null && (f.destroy(), f = null); r.length == 0 && (r.push({ field: "Name", caption: VIS.Msg.translate(VIS.Env.getCtx(), "Name"), sortable: !0, size: "20%", min: 150, hidden: !1 }), r.push({ field: "vat_departmentname", caption: VIS.Msg.translate(VIS.Env.getCtx(), "Department"), sortable: !0, size: "20%", min: 150, hidden: !1 }), r.push({ field: "VAT_EmployeeGrade", caption: VIS.Msg.translate(VIS.Env.getCtx(), "EmployeeGrade"), sortable: !0, size: "20%", min: 150, hidden: !1 }), r.push({ field: "V_Date", caption: VIS.Msg.translate(VIS.Env.getCtx(), "DateOfBirth"), sortable: !0, size: "20%", min: 150, hidden: !1, render: "date" }), r.push({ field: "Delete", caption: VIS.Msg.translate(VIS.Env.getCtx(), "Delete"), sortable: !0, size: "80px", min: 150, hidden: !1, render: function () { return '<div><img src="' + VIS.Application.contextUrl + 'Areas/VIS/Images/base/Delete24.png" alt="Delete record" title="Delete record" style="opacity: 1;"><\/div>' } }), r.push({ field: "VAT_Employee_ID", caption: VIS.Msg.getElement(VIS.Env.getCtx(), "VAT_Employee_ID"), sortable: !0, size: "150px", hidden: !0 }), r.push({ field: "VAT_Department_ID", caption: VIS.Msg.getElement(VIS.Env.getCtx(), "VAT_Department_ID"), sortable: !0, size: "20%", min: 150, hidden: !0 })); setTimeout(10); w2utils.encodeTags(n); f = t(y).w2grid({ name: "gridGenEmployeeForm" + s.windowNo, recordHeight: 40, columns: r, records: n, onClick: function (n) { n.column == 4 && f.records.length > 0 && it(n.recid) } }) } var n = t("<div>"), l = t("<div class='vis-apanel-busy'>"), s = this, h = null, c = null, r = [], f = null, g = null, nt = null, y = null, p = null, a = null, w = null, e = null, b = null, o = null, k = null, v = null, u = null, i = Number(VIS.Env.getWindowNo()); this.showDialoge = function () { tt(); l.height(400); n.append(l); n.dialog({ modal: !0, title: VIS.Msg.getMsg("GrossCalculation"), height: t(window).height() - 100, width: t(window).width() - 100, position: { at: "center top", of: window }, close: function () { s.dispose(); n.dialog("destroy"); n = null } }) }; this.show = function () { var i = t("<div><p>Sample Dialoge<\/p><\/div>"), n; l.height(400); n = new VIS.ChildDialog; n.setHeight(t(window).height() - 100); n.setWidth(t(window).width() - 100); n.setTitle(VIS.Msg.getMsg("DemoForm")); n.setModal(!0); n.setContent(i); n.onClose = function () { s.onClose && s.onClose(); s.dispose() }; n.show(); n.onOkClick = function () { VIS.ADialog.info("OKClicked") }; n.onCancelClick = function () { VIS.ADialog.info("CancelClicked") } }; this.disposeComponent = function () { h && h.off("click"); c && c.off("click"); l = null; h = null; c = null; r = null; f = null; g = null; nt = null; y = null; p = null; a = null; w = null; e = null; b = null; o = null; k = null; v = null; u = null; i = null; this.disposeComponent = null } } i.prototype.dispose = function () { this.disposeComponent() }; n.EmployeeFormByDialog = i }(VAT, jQuery); VAT = window.VAT || {}, function (n, t) { n.EmployeeFormByJavaScript = function () { function ut() { var rt, r, f; g.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "Name")); nt.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "Department")); tt.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "EmployeeGrade")); it.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "DateOfBirth")); u.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "Bottom Message")); s = t("<div style='width: 100%; height: 100%; background-color: white;'>"); k = t("<div class='vis-apanel-busy'>"); a = t("<input id='btnPartial_" + i.windowNo + "' class='VIS_Pref_btn-2' style='float: left;height: 38px;' type='button' value='SampleDialoge1'>"); d = t("<input id='btnSample_" + i.windowNo + "' class='VIS_Pref_btn-2' style='float: left;height: 38px;' type='button' value='SampleDialoge2'>"); h = t("<input id='btnOk_" + i.windowNo + "' class='VIS_Pref_btn-2' style='   margin-right: 3px;height: 38px;' type='button' value='Save'>"); c = t("<input id='btnCancel_" + i.windowNo + "' class='VIS_Pref_btn-2' style='   margin-right: 15px ;width: 70px;height: 38px;' type='button' value='Clear'>"); l = t("<div id='leftSideDiv_" + i.windowNo + "' style='float: left; margin-left: 0px;height: 95%;width:20%;margin-top: 1px;position: relative; background-color: #F1F1F1;'>"); v = t("<div id='leftSideBottomDiv_" + i.windowNo + "' style='float: left; position: absolute; bottom: 0;height: 60px;width:100%; background-color: #F1F1F1'>"); p = t("<div style='width: 100%; height: 60px; float: left; margin-bottom: 0px;'>"); rt = t("<table style='width: 100%;'>"); l.append(rt); r = t("<tr>"); f = t("<td style='padding: 4px 15px 2px;'>"); rt.append(r); r.append(f); f.append(g.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font")); r = t("<tr>"); f = t("<td style='padding: 0px 15px 0px;'>"); rt.append(r); r.append(f); f.append(w.getControl().css("display", "inline-block").css("width", "236px").css("height", "30px")); r = t("<tr>"); f = t("<td style='padding: 4px 15px 2px;'>"); rt.append(r); r.append(f); f.append(nt.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font")); r = t("<tr>"); f = t("<td style='padding: 0px 15px 0px;'>"); rt.append(r); r.append(f); f.append(e.getControl().css("display", "inline-block").css("width", "236px").css("height", "30px")); r = t("<tr>"); f = t("<td style='padding: 4px 15px 2px;'>"); rt.append(r); r.append(f); f.append(tt.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font")); r = t("<tr>"); f = t("<td style='padding: 0px 15px 0px;'>"); rt.append(r); r.append(f); f.append(o.getControl().css("display", "inline-block").css("width", "236px").css("height", "30px")); r = t("<tr>"); f = t("<td style='padding: 4px 15px 2px;'>"); rt.append(r); r.append(f); f.append(it.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font")); r = t("<tr>"); f = t("<td style='padding: 0px 15px 0px;'>"); rt.append(r); r.append(f); f.append(b.getControl().css("display", "inline-block").css("width", "236px").css("height", "30px")); v.append(c).append(h); l.append(v); r = t("<tr>"); f = t("<td style='padding: 0px 15px 0px;'>"); rt.append(r); r.append(f); f.append(a); r = t("<tr>"); f = t("<td style='padding: 0px 15px 0px;'>"); rt.append(r); r.append(f); f.append(d); y = t("<div id='rightSideDiv_" + i.windowNo + "' style='float: right;width: 78%; height: 95%;  margin-right: 15px;margin-top: 1px; border: 1px solid darkgray;'>"); p.append(u.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font")); s.append(k).append(l).append(y).append(p); h.on(VIS.Events.onTouchStartOrClick, function () { ht() }); c.on(VIS.Events.onTouchStartOrClick, function () { w.getControl().val(""); o.getControl().prop("selectedIndex", -1); e.getControl().prop("selectedIndex", -1); b.getControl().val(""); u.getControl().text("Please Fill value to insert record.") }); a.on(VIS.Events.onTouchStartOrClick, function () { var t = new n.EmployeeFormByDialog(i.windowNo); t.show() }); d.on(VIS.Events.onTouchStartOrClick, function () { var t = new n.EmployeeFormByDialog(i.windowNo); t.showDialoge() }); ot(); st() } function rt() { var i = [], u = VIS.Env.getCtx().getAD_Client_ID(), f = "select e.VAT_Employee_ID,e.name,d.vat_departmentname,e.vat_employeegrade,e.v_date,e.vat_department_id  from vat_employee e left join vat_department d on d.vat_department_id=e.vat_department_id  where e.ad_client_id=" + u, t, r, n; try { for (t = VIS.DB.executeReader(f.toString(), null, null), r = 1; t.read() ;) n = {}, n.VAT_Employee_ID = t.getInt(0), n.Name = t.getString(1), n.vat_departmentname = t.getString(2), n.VAT_EmployeeGrade = t.getString(3), n.V_Date = t.getString(4), n.VAT_Department_ID = t.getInt(5), n.recid = r, r++, i.push(n) } catch (e) { } return ft(i), i } function ft(n) { f != null && (f.destroy(), f = null); r.length == 0 && (r.push({ field: "Name", caption: VIS.Msg.translate(VIS.Env.getCtx(), "Name"), sortable: !0, size: "20%", min: 150, hidden: !1 }), r.push({ field: "vat_departmentname", caption: VIS.Msg.translate(VIS.Env.getCtx(), "Department"), sortable: !0, size: "20%", min: 150, hidden: !1 }), r.push({ field: "VAT_EmployeeGrade", caption: VIS.Msg.translate(VIS.Env.getCtx(), "EmployeeGrade"), sortable: !0, size: "20%", min: 150, hidden: !1 }), r.push({ field: "V_Date", caption: VIS.Msg.translate(VIS.Env.getCtx(), "DateOfBirth"), sortable: !0, size: "20%", min: 150, hidden: !1, render: "date" }), r.push({ field: "Delete", caption: VIS.Msg.translate(VIS.Env.getCtx(), "Delete"), sortable: !0, size: "80px", min: 150, hidden: !1, render: function () { return '<div><img src="' + VIS.Application.contextUrl + 'Areas/VIS/Images/base/Delete24.png" alt="Delete record" title="Delete record" style="opacity: 1;"><\/div>' } }), r.push({ field: "VAT_Employee_ID", caption: VIS.Msg.getElement(VIS.Env.getCtx(), "VAT_Employee_ID"), sortable: !0, size: "150px", hidden: !0 }), r.push({ field: "VAT_Department_ID", caption: VIS.Msg.getElement(VIS.Env.getCtx(), "VAT_Department_ID"), sortable: !0, size: "20%", min: 150, hidden: !0 })); setTimeout(10); w2utils.encodeTags(n); f = t(y).w2grid({ name: "gridGenEmployeeForm" + i.windowNo, recordHeight: 40, columns: r, records: n, onClick: function (n) { n.column == 4 && f.records.length > 0 && et(n.recid) } }) } function et(n) { if (confirm("Are You Sure,You want to delete this record?")) { var i = f.get(n).VAT_Employee_ID; t.ajax({ type: "POST", url: VIS.Application.contextUrl + "VAT/Common/Delete", dataType: "json", data: { employeeId: i }, success: function (n) { var t = n.result; if (t) { u.getControl().text("Record Deleted."); rt(); return } u.getControl().text("Record not delete.") } }) } } function ot() { var f = e, i, n, r, u; for (t(f).html(""), i = "select vat_department_id,vat_departmentname from vat_department where isactive='Y'", n = VIS.DB.executeReader(i.toString(), null) ; n.read() ;) r = VIS.Utility.Util.getValueOfInt(n.getString(0)), u = n.getString(1), e.getControl().append(" <option value=" + r + ">" + u + "<\/option>"); n.close(); e.getControl().prop("selectedIndex", 0) } function st() { var f = o, i, n, r, u; for (t(f).html(""), i = "select value,name from ad_ref_list where ad_reference_id=(select ad_reference_id from ad_reference where name='VAT_EmployeeGrade')", n = VIS.DB.executeReader(i.toString(), null) ; n.read() ;) r = n.getString(0), u = n.getString(1), o.getControl().append(" <option value=" + r + ">" + u + "<\/option>"); n.close(); o.getControl().prop("selectedIndex", 0) } function ht() { var f = e.getControl().find("option:selected").val(), s = o.getControl().find("option:selected").val(), r = w.getControl().val(), n = b.getControl().val(); r.length <= 0 && (VIS.ADialog.info("FillMandatoryField!"), i.log.severe("EmployeenameMendatory")); n != "" && (n = n.toString()); t.ajax({ type: "POST", url: VIS.Application.contextUrl + "VAT/Common/Save", dataType: "json", data: { employeeId: 0, name: r, departmentId: f, empGrade: s, date: n }, success: function (n) { var t = n.result; if (t) { u.getControl().text("Record saved."); rt(); return } u.getControl().text("Record not saved.") } }) } var i, s, k, h, c, a, d; this.frame; this.windowNo; i = this; this.log = VIS.Logging.VLogger.getVLogger("EmployeeFormByJavaScript"); var r = [], f = null, l = null, v = null, y = null, p = null, g = new VIS.Controls.VLabel, w = new VIS.Controls.VTextBox("Name", !0, !1, !0, 50, 100, VIS.DisplayType.Number, "Name"), nt = new VIS.Controls.VLabel, e = new VIS.Controls.VComboBox("", !1, !1, !0), tt = new VIS.Controls.VLabel, o = new VIS.Controls.VComboBox("", !1, !1, !0), it = new VIS.Controls.VLabel, b = new VIS.Controls.VDate("V_Date", !1, !1, !0, VIS.DisplayType.DateTime, "Date"), u = new VIS.Controls.VLabel; this.display = function () { rt() }; this.Initialize = function () { ut() }; this.getRoot = function () { return s }; this.disposeComponent = function () { i = null; s && s.remove(); s = null; h && h.off(VIS.Events.onTouchStartOrClick); c && c.off(VIS.Events.onTouchStartOrClick); k = h = c = a = null; r = null; f = null; l = null; v = null; y = null; p = null; g = null; w = null; nt = null; e = null; tt = null; o = null; it = null; b = null; u = null; this.getRoot = null; this.disposeComponent = null } }; n.EmployeeFormByJavaScript.prototype.init = function (n, t) { this.frame = t; this.windowNo = n; var i = this.Initialize(); this.frame.getContentGrid().append(this.getRoot()); this.display() }; n.EmployeeFormByJavaScript.prototype.dispose = function () { this.disposeComponent(); this.frame && this.frame.dispose(); this.frame = null } }(VAT, jQuery); VAT = window.VAT || {}, function (n, t) { n.EmployeeFormByView = function () { function nt() { t.ajax({ url: VIS.Application.contextUrl + "VAT/EmployeeByView/Index", type: "Get", async: !1, data: { windowno: i.windowNo }, success: function (n) { it(n) }, error: function (n) { alert(n) } }) } function tt() { nt() } function it(r) { n = t(r); v = n.find("#lblName_" + i.windowNo); c = n.find("#txtName_" + i.windowNo); y = n.find("#lblDepartment_" + i.windowNo); e = n.find("#cmbDepartment_" + i.windowNo); p = n.find("#lblEmployeeGrade_" + i.windowNo); o = n.find("#cmbEmployeeGrade_" + i.windowNo); w = n.find("#lblDateOfBirth_" + i.windowNo); l = n.find("#vdate_" + i.windowNo); u = n.find("#lblBottomMsg_" + i.windowNo); k = n.find("#leftSideDiv_" + i.windowNo); d = n.find("#leftSideBottomDiv_" + i.windowNo); a = n.find("#rightSideDiv_" + i.windowNo); s = n.find("#btnOk_" + i.windowNo); h = n.find("#btnCancel_" + i.windowNo); v.text(VIS.Msg.translate(VIS.Env.getCtx(), "Name")); y.text(VIS.Msg.translate(VIS.Env.getCtx(), "Department")); p.text(VIS.Msg.translate(VIS.Env.getCtx(), "EmployeeGrade")); w.text(VIS.Msg.translate(VIS.Env.getCtx(), "DateOfBirth")); u.text(VIS.Msg.translate(VIS.Env.getCtx(), "Bottom Message")); s.on(VIS.Events.onTouchStartOrClick, function () { et() }); h.on(VIS.Events.onTouchStartOrClick, function () { c.val(""); o.prop("selectedIndex", -1); e.prop("selectedIndex", -1); l.val(""); u.text("Please Fill value to insert record.") }); ut(); ft() } function rt(n) { if (confirm("Are You Sure,You want to delete this record?")) { var i = f.get(n).VAT_Employee_ID; t.ajax({ type: "POST", url: VIS.Application.contextUrl + "VAT/Common/Delete", dataType: "json", data: { employeeId: i }, success: function (n) { var t = n.result; if (t) { u.text("Record Deleted."); b(); return } u.text("Record not delete.") } }) } } function ut() { var f = e, i, n, r, u; for (t(f).html(""), i = "select vat_department_id,vat_departmentname from vat_department where isactive='Y'", n = VIS.DB.executeReader(i.toString(), null) ; n.read() ;) r = VIS.Utility.Util.getValueOfInt(n.getString(0)), u = n.getString(1), e.append(" <option value=" + r + ">" + u + "<\/option>"); n.close(); e.prop("selectedIndex", 0) } function ft() { var f = o, i, n, r, u; for (t(f).html(""), i = "select value,name from ad_ref_list where ad_reference_id=(select ad_reference_id from ad_reference where name='VAT_EmployeeGrade')", n = VIS.DB.executeReader(i.toString(), null) ; n.read() ;) r = n.getString(0), u = n.getString(1), o.append(" <option value=" + r + ">" + u + "<\/option>"); n.close(); o.prop("selectedIndex", 0) } function et() { var r = e.find("option:selected").val(), f = o.find("option:selected").val(), i = c.val(), n = l.val(); i.length <= 0 && VIS.ADialog.info("FillMandatoryField!"); n != "" && (n = n.toString()); t.ajax({ type: "POST", url: VIS.Application.contextUrl + "VAT/Common/Save", dataType: "json", data: { employeeId: 0, name: i, departmentId: r, empGrade: f, date: n }, success: function (n) { var t = n.result; if (t) { u.text("Record saved."); b(); return } u.text("Record not saved.") } }) } function b() { var i = [], u = VIS.Env.getCtx().getAD_Client_ID(), f = "select e.VAT_Employee_ID,e.name,d.vat_departmentname,e.vat_employeegrade,e.v_date,e.vat_department_id  from vat_employee e left join vat_department d on d.vat_department_id=e.vat_department_id  where e.ad_client_id=" + u, t, r, n; try { for (t = VIS.DB.executeReader(f.toString(), null, null), r = 1; t.read() ;) n = {}, n.VAT_Employee_ID = t.getInt(0), n.Name = t.getString(1), n.vat_departmentname = t.getString(2), n.VAT_EmployeeGrade = t.getString(3), n.V_Date = t.getString(4), n.VAT_Department_ID = t.getInt(5), n.recid = r, r++, i.push(n) } catch (e) { } return ot(i), i } function ot(n) { f != null && (f.destroy(), f = null); r.length == 0 && (r.push({ field: "Name", caption: VIS.Msg.translate(VIS.Env.getCtx(), "Name"), sortable: !0, size: "20%", min: 150, hidden: !1 }), r.push({ field: "vat_departmentname", caption: VIS.Msg.translate(VIS.Env.getCtx(), "Department"), sortable: !0, size: "20%", min: 150, hidden: !1 }), r.push({ field: "VAT_EmployeeGrade", caption: VIS.Msg.translate(VIS.Env.getCtx(), "EmployeeGrade"), sortable: !0, size: "20%", min: 150, hidden: !1 }), r.push({ field: "V_Date", caption: VIS.Msg.translate(VIS.Env.getCtx(), "DateOfBirth"), sortable: !0, size: "20%", min: 150, hidden: !1, render: "date" }), r.push({ field: "Delete", caption: VIS.Msg.translate(VIS.Env.getCtx(), "Delete"), sortable: !0, size: "80px", min: 150, hidden: !1, render: function () { return '<div><img src="' + VIS.Application.contextUrl + 'Areas/VIS/Images/base/Delete24.png" alt="Delete record" title="Delete record" style="opacity: 1;"><\/div>' } }), r.push({ field: "VAT_Employee_ID", caption: VIS.Msg.getElement(VIS.Env.getCtx(), "VAT_Employee_ID"), sortable: !0, size: "150px", hidden: !0 }), r.push({ field: "VAT_Department_ID", caption: VIS.Msg.getElement(VIS.Env.getCtx(), "VAT_Department_ID"), sortable: !0, size: "20%", min: 150, hidden: !0 })); setTimeout(10); w2utils.encodeTags(n); f = t(a).w2grid({ name: "gridGenEmployeeForm" + i.windowNo, recordHeight: 40, columns: r, records: n, onClick: function (n) { n.column == 4 && f.records.length > 0 && rt(n.recid) } }) } this.frame; this.windowNo; var i = this, s = null, h = null, n = null, g = t("<div class='vis-apanel-busy'>"), r = [], f = null, k = null, d = null, a = null, v = null, c = null, y = null, e = null, p = null, o = null, w = null, l = null, u = null; this.Initialize = function () { tt() }; this.display = function () { b() }; this.getRoot = function () { return n }; this.disposeComponent = function () { i = null; n && n.remove(); n = null; s && s.off(VIS.Events.onTouchStartOrClick); h && h.off(VIS.Events.onTouchStartOrClick); g = s = h = null; r = null; f = null; k = null; d = null; a = null; bottumDiv = null; v = null; c = null; y = null; e = null; p = null; o = null; w = null; l = null; u = null; this.getRoot = null; this.disposeComponent = null } }; n.EmployeeFormByView.prototype.init = function (n, t) { this.frame = t; this.windowNo = n; var i = this.Initialize(); this.frame.getContentGrid().append(this.getRoot()); this.display() }; n.EmployeeFormByView.prototype.dispose = function () { this.disposeComponent(); this.frame && this.frame.dispose(); this.frame = null } }(VAT, jQuery)